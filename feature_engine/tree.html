<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Feature Tree</title>
<link rel="preconnect" href="https://unpkg.com">
<link rel="stylesheet" href="https://unpkg.com/vis-network@9.1.6/styles/vis-network.min.css">
<script src="https://unpkg.com/vis-network@9.1.6/dist/vis-network.min.js"></script>
<style>
  body { font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial; margin: 0; }
  #toolbar { padding: 10px 14px; border-bottom: 1px solid #e5e5e5; display: flex; gap: 12px; align-items:center; flex-wrap: wrap; }
  #network { height: 82vh; border-top: 0; }
  .pill { display:inline-flex; gap:6px; align-items:center; padding:6px 10px; border:1px solid #ddd; border-radius:999px; }
  .sep { height: 20px; width:1px; background:#e5e5e5; margin:0 4px; }
  #info { font-size:13px; color:#666; }
  #details { padding: 8px 14px; font-size: 13px; border-top: 1px solid #eee; height: 16vh; overflow:auto; }
  code { background:#f6f8fa; padding:2px 4px; border-radius:4px; }
</style>
</head>
<body>

<div id="toolbar">
  <div class="pill">
    <input id="query" placeholder="æœç´¢èŠ‚ç‚¹ ID æˆ–æè¿°å…³é”®å­—â€¦" style="width:260px; padding:6px 8px; border:1px solid #ccc; border-radius:8px;">
    <button id="btnSearch">æœç´¢å¹¶å®šä½</button>
    <button id="btnClear">æ¸…é™¤é«˜äº®</button>
  </div>

  <div class="sep"></div>

  <div class="pill">
    <label><input type="checkbox" class="typeToggle" value="Origin" checked> Origin</label>
    <label><input type="checkbox" class="typeToggle" value="Feature" checked> Feature</label>
    <label><input type="checkbox" class="typeToggle" value="Problem" checked> Problem</label>
    <label><input type="checkbox" class="typeToggle" value="Solution" checked> Solution</label>
    <label><input type="checkbox" class="typeToggle" value="Success" checked> Success</label>
    <label><input type="checkbox" class="typeToggle" value="Failure" checked> Failure</label>
  </div>

  <div class="sep"></div>

  <div class="pill">
    <label><input type="checkbox" id="hier" checked> å±‚çº§å¸ƒå±€</label>
    <label><input type="checkbox" id="physics" checked> ç‰©ç†å¼•æ“</label>
    <button id="btnFit">Fit</button>
  </div>

  <div id="info"></div>
</div>

<div id="network"></div>
<div id="details">ğŸ‘ˆ ç‚¹å‡»èŠ‚ç‚¹æŸ¥çœ‹è¯¦æƒ…</div>

<script>
const RAW_NODES = [{"id": "FAILURE", "label": "å¤±è´¥", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: FAILURE</div><div><b>Type</b>: Failure</div><div style='margin-top:6px;'><b>Description</b>:<br>å¤±è´¥</div></div>", "shape": "hexagon", "color": "#d62728", "group": "Failure"}, {"id": "SUCCESS", "label": "å®Œæˆ", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: SUCCESS</div><div><b>Type</b>: Success</div><div style='margin-top:6px;'><b>Description</b>:<br>å®Œæˆ</div></div>", "shape": "hexagon", "color": "#17becf", "group": "Success"}, {"id": "ORIGIN", "label": "è®­ç»ƒæ ‘å…¥å£", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: ORIGIN</div><div><b>Type</b>: Origin</div><div style='margin-top:6px;'><b>Description</b>:<br>è®­ç»ƒæ ‘å…¥å£</div></div>", "shape": "star", "color": "#7b68ee", "group": "Origin"}, {"id": "F_e2b4dda6", "label": "æœºå™¨äººå¼€ä¸äº†æœº", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: F_e2b4dda6</div><div><b>Type</b>: Feature</div><div style='margin-top:6px;'><b>Description</b>:<br>æœºå™¨äººå¼€ä¸äº†æœº</div></div>", "shape": "box", "color": "#1f77b4", "group": "Feature"}, {"id": "F_3936c370", "label": "rcsæ˜¾ç¤ºç”µé‡ä½", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: F_3936c370</div><div><b>Type</b>: Feature</div><div style='margin-top:6px;'><b>Description</b>:<br>rcsæ˜¾ç¤ºç”µé‡ä½</div></div>", "shape": "box", "color": "#1f77b4", "group": "Feature"}, {"id": "P_6ca46b55", "label": "è®¾å¤‡ç”µé‡ä¸è¶³ã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_6ca46b55</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>è®¾å¤‡ç”µé‡ä¸è¶³ã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_0f83caff", "label": "è¿›è¡Œæ‰‹åŠ¨å……ç”µ20åˆ†é’Ÿ", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_0f83caff</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>è¿›è¡Œæ‰‹åŠ¨å……ç”µ20åˆ†é’Ÿ</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "P_3fca6793", "label": "è®¾å¤‡æ— æ³•æ­£å¸¸å¯åŠ¨æˆ–ä¾›ç”µã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_3fca6793</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>è®¾å¤‡æ— æ³•æ­£å¸¸å¯åŠ¨æˆ–ä¾›ç”µã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_5a5aecef", "label": "æ£€æŸ¥ç”µæ± è¿æ¥çº¿æ˜¯å¦æ¾åŠ¨ï¼Œå°è¯•é‡æ–°\næ’æ‹”ç”µæ± è¿æ¥çº¿", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_5a5aecef</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>æ£€æŸ¥ç”µæ± è¿æ¥çº¿æ˜¯å¦æ¾åŠ¨ï¼Œå°è¯•é‡æ–°æ’æ‹”ç”µæ± è¿æ¥çº¿</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "P_f658604e", "label": "ç”µæ± æ¨¡å—å¯èƒ½æŸåå¯¼è‡´è®¾å¤‡æ— æ³•æ­£å¸¸\nå·¥ä½œã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_f658604e</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>ç”µæ± æ¨¡å—å¯èƒ½æŸåå¯¼è‡´è®¾å¤‡æ— æ³•æ­£å¸¸å·¥ä½œã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_1e4c5059", "label": "æ£€æŸ¥ç”µæ± æ¨¡å—æ˜¯å¦æŸåï¼Œå°è¯•æ›´æ¢ç”µ\næ± æ¨¡å—", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_1e4c5059</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>æ£€æŸ¥ç”µæ± æ¨¡å—æ˜¯å¦æŸåï¼Œå°è¯•æ›´æ¢ç”µæ± æ¨¡å—</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "P_84864125", "label": "ç”µæºæ¿æˆ–BMSPæ¿å¯èƒ½å­˜åœ¨æŸåã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_84864125</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>ç”µæºæ¿æˆ–BMSPæ¿å¯èƒ½å­˜åœ¨æŸåã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_93bce1c6", "label": "æ£€æŸ¥ç”µæºæ¿å’ŒBMSPæ¿æ˜¯å¦æŸåï¼Œ\nå°è¯•æ›´æ¢ç”µæºæ¿å’ŒBMSPæ¿", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_93bce1c6</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>æ£€æŸ¥ç”µæºæ¿å’ŒBMSPæ¿æ˜¯å¦æŸåï¼Œå°è¯•æ›´æ¢ç”µæºæ¿å’ŒBMSPæ¿</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "P_6acdfafe", "label": "APçš„ä¿¡å·å¼ºåº¦ä¸ç¨³å®šæˆ–è¦†ç›–èŒƒå›´ä¸\nè¶³ã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_6acdfafe</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>APçš„ä¿¡å·å¼ºåº¦ä¸ç¨³å®šæˆ–è¦†ç›–èŒƒå›´ä¸è¶³ã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_db304258", "label": "æŸ¥APçš„ä¸¤æ ¹å¤©çº¿æŸ±å­æ˜¯å¦æ‹§ç´§ï¼Œå°\nè¯•é‡æ–°æ‹§ç´§ï¼Œå¹¶ä¸”é¿å…å¤©çº¿åº•åº§è·Ÿé‡‘\nå±æœ‰æ¥è§¦ã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_db304258</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>æŸ¥APçš„ä¸¤æ ¹å¤©çº¿æŸ±å­æ˜¯å¦æ‹§ç´§ï¼Œå°è¯•é‡æ–°æ‹§ç´§ï¼Œå¹¶ä¸”é¿å…å¤©çº¿åº•åº§è·Ÿé‡‘å±æœ‰æ¥è§¦ã€‚</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "P_098cc4e4", "label": "APæ— æ³•æ­£å¸¸å·¥ä½œæˆ–æ— æ³•è¿æ¥ç½‘ç»œã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_098cc4e4</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>APæ— æ³•æ­£å¸¸å·¥ä½œæˆ–æ— æ³•è¿æ¥ç½‘ç»œã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_2ff5080f", "label": "æ£€æŸ¥APçš„ç½‘çº¿å’Œç”µæºæ˜¯å¦æ­£å¸¸ï¼Œå°\nè¯•é‡æ–°æ’æ‹”ç½‘çº¿å’Œç”µæºçº¿ã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_2ff5080f</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>æ£€æŸ¥APçš„ç½‘çº¿å’Œç”µæºæ˜¯å¦æ­£å¸¸ï¼Œå°è¯•é‡æ–°æ’æ‹”ç½‘çº¿å’Œç”µæºçº¿ã€‚</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "S_99f1ec66", "label": "æ›´æ¢APç›’å­", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_99f1ec66</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>æ›´æ¢APç›’å­</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "P_24558e99", "label": "æ— çº¿ç½‘ç»œä¿¡å·å¹²æ‰°å¯¼è‡´è¿æ¥ä¸ç¨³å®šã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_24558e99</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>æ— çº¿ç½‘ç»œä¿¡å·å¹²æ‰°å¯¼è‡´è¿æ¥ä¸ç¨³å®šã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_6b352cdf", "label": "å°è¯•æ›´æ¢APä¿¡é“", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_6b352cdf</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>å°è¯•æ›´æ¢APä¿¡é“</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "P_be45a441", "label": "æœºå™¨äººå‡ºç°äº†é”™è¯¯ä»£ç ã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_be45a441</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>æœºå™¨äººå‡ºç°äº†é”™è¯¯ä»£ç ã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_777ad24e", "label": "æ ¹æ®æŠ¥é”™ä»£ç è¿›è¡Œæ’æŸ¥ï¼ˆæŒ‰ã€Šæœºå™¨äºº\næŠ¥é”™ä»£ç æ’æŸ¥æ‰‹å†Œã€‹ï¼‰", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_777ad24e</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>æ ¹æ®æŠ¥é”™ä»£ç è¿›è¡Œæ’æŸ¥ï¼ˆæŒ‰ã€Šæœºå™¨äººæŠ¥é”™ä»£ç æ’æŸ¥æ‰‹å†Œã€‹ï¼‰</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "P_c1c43d61", "label": "å®¢æˆ·çš„é€šé“è¢«éšœç¢ç‰©é˜»å¡ã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_c1c43d61</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>å®¢æˆ·çš„é€šé“è¢«éšœç¢ç‰©é˜»å¡ã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_26ce7531", "label": "å¼•å¯¼å®¢æˆ·æ¸…ç†éšœç¢ç‰©", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_26ce7531</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>å¼•å¯¼å®¢æˆ·æ¸…ç†éšœç¢ç‰©</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "P_deb7458c", "label": "æ ¼å£æˆ–åˆ†æ‹£æœºçŠ¶æ€å¼‚å¸¸ã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_deb7458c</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>æ ¼å£æˆ–åˆ†æ‹£æœºçŠ¶æ€å¼‚å¸¸ã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_eea7ba81", "label": "æ¢å¤æ ¼å£æˆ–åˆ†æ‹£æœºçŠ¶æ€", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_eea7ba81</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>æ¢å¤æ ¼å£æˆ–åˆ†æ‹£æœºçŠ¶æ€</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "F_63a58447", "label": "RCS å°è½¦æŠ¥é”™é—ªçƒä¸”é¢œè‰²ä¸ºç²‰è‰²", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: F_63a58447</div><div><b>Type</b>: Feature</div><div style='margin-top:6px;'><b>Description</b>:<br>RCS å°è½¦æŠ¥é”™é—ªçƒä¸”é¢œè‰²ä¸ºç²‰è‰²</div></div>", "shape": "box", "color": "#1f77b4", "group": "Feature"}, {"id": "P_3c397816", "label": "åœ°æ¯¯ RFID ä¸ RCS ä¸ä¸€\nè‡´ã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_3c397816</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>åœ°æ¯¯ RFID ä¸ RCS ä¸ä¸€è‡´ã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_4350104c", "label": "æ£€æŸ¥åœ°æ¯¯ RFID æ˜¯å¦ä¸ RC\nS ä¸€è‡´", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_4350104c</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>æ£€æŸ¥åœ°æ¯¯ RFID æ˜¯å¦ä¸ RCS ä¸€è‡´</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}, {"id": "P_6d7db932", "label": "ç³»ç»Ÿåœ¨æ‰§è¡Œæ—¶å‡ºç°äº†å›ºå®šæ¨¡å¼å¯¼è‡´çš„\næ•ˆç‡ä½ä¸‹ã€‚", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: P_6d7db932</div><div><b>Type</b>: Problem</div><div style='margin-top:6px;'><b>Description</b>:<br>ç³»ç»Ÿåœ¨æ‰§è¡Œæ—¶å‡ºç°äº†å›ºå®šæ¨¡å¼å¯¼è‡´çš„æ•ˆç‡ä½ä¸‹ã€‚</div></div>", "shape": "ellipse", "color": "#ff7f0e", "group": "Problem"}, {"id": "S_daac82e2", "label": "å°†æ¨¡å¼æ”¹ä¸ºéšæœºè·‘", "title": "<div style='font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;'><div><b>ID</b>: S_daac82e2</div><div><b>Type</b>: Solution</div><div style='margin-top:6px;'><b>Description</b>:<br>å°†æ¨¡å¼æ”¹ä¸ºéšæœºè·‘</div></div>", "shape": "diamond", "color": "#2ca02c", "group": "Solution"}];
const RAW_EDGES = [{"from": "ORIGIN", "to": "F_e2b4dda6", "etype": "origin->feature"}, {"from": "F_e2b4dda6", "to": "P_3fca6793", "label": "hard", "etype": "feature->problem"}, {"from": "F_e2b4dda6", "to": "P_f658604e", "label": "soft", "etype": "feature->problem"}, {"from": "F_e2b4dda6", "to": "P_84864125", "label": "soft", "etype": "feature->problem"}, {"from": "F_e2b4dda6", "to": "P_24558e99", "label": "soft", "etype": "feature->problem"}, {"from": "F_e2b4dda6", "to": "P_6d7db932", "label": "soft", "etype": "feature->problem"}, {"from": "F_e2b4dda6", "to": "F_3936c370", "etype": "feature->feature"}, {"from": "F_3936c370", "to": "P_6ca46b55", "label": "hard", "etype": "feature->problem"}, {"from": "F_3936c370", "to": "P_6acdfafe", "label": "soft", "etype": "feature->problem"}, {"from": "F_3936c370", "to": "P_098cc4e4", "label": "soft", "etype": "feature->problem"}, {"from": "F_3936c370", "to": "P_be45a441", "label": "soft", "etype": "feature->problem"}, {"from": "F_3936c370", "to": "P_c1c43d61", "label": "soft", "etype": "feature->problem"}, {"from": "F_3936c370", "to": "P_deb7458c", "label": "soft", "etype": "feature->problem"}, {"from": "F_3936c370", "to": "F_63a58447", "etype": "feature->feature"}, {"from": "P_6ca46b55", "to": "S_0f83caff", "etype": "problem->solution"}, {"from": "S_0f83caff", "to": "SUCCESS", "etype": "solution->success"}, {"from": "P_3fca6793", "to": "S_5a5aecef", "etype": "problem->solution"}, {"from": "S_5a5aecef", "to": "SUCCESS", "etype": "solution->success"}, {"from": "P_f658604e", "to": "S_1e4c5059", "etype": "problem->solution"}, {"from": "S_1e4c5059", "to": "SUCCESS", "etype": "solution->success"}, {"from": "P_84864125", "to": "S_93bce1c6", "etype": "problem->solution"}, {"from": "S_93bce1c6", "to": "SUCCESS", "etype": "solution->success"}, {"from": "P_6acdfafe", "to": "S_db304258", "etype": "problem->solution"}, {"from": "S_db304258", "to": "SUCCESS", "etype": "solution->success"}, {"from": "P_098cc4e4", "to": "S_2ff5080f", "etype": "problem->solution"}, {"from": "P_098cc4e4", "to": "S_99f1ec66", "etype": "problem->solution"}, {"from": "S_2ff5080f", "to": "SUCCESS", "etype": "solution->success"}, {"from": "S_99f1ec66", "to": "SUCCESS", "etype": "solution->success"}, {"from": "P_24558e99", "to": "S_6b352cdf", "etype": "problem->solution"}, {"from": "S_6b352cdf", "to": "SUCCESS", "etype": "solution->success"}, {"from": "P_be45a441", "to": "S_777ad24e", "etype": "problem->solution"}, {"from": "S_777ad24e", "to": "SUCCESS", "etype": "solution->success"}, {"from": "P_c1c43d61", "to": "S_26ce7531", "etype": "problem->solution"}, {"from": "S_26ce7531", "to": "SUCCESS", "etype": "solution->success"}, {"from": "P_deb7458c", "to": "S_eea7ba81", "etype": "problem->solution"}, {"from": "S_eea7ba81", "to": "SUCCESS", "etype": "solution->success"}, {"from": "F_63a58447", "to": "P_3c397816", "label": "hard", "etype": "feature->problem"}, {"from": "P_3c397816", "to": "S_4350104c", "etype": "problem->solution"}, {"from": "S_4350104c", "to": "SUCCESS", "etype": "solution->success"}, {"from": "P_6d7db932", "to": "S_daac82e2", "etype": "problem->solution"}, {"from": "S_daac82e2", "to": "SUCCESS", "etype": "solution->success"}];

const container = document.getElementById('network');
const details = document.getElementById('details');
const info = document.getElementById('info');

const allNodes = new vis.DataSet(RAW_NODES);
const allEdges = new vis.DataSet(RAW_EDGES);

// åˆå§‹å¯è§é›†ï¼ˆå¯è¢«è¿‡æ»¤ï¼‰
const nodes = new vis.DataSet(allNodes.get());
const edges = new vis.DataSet(allEdges.get());

function buildOptions() {
  return {
    interaction: { hover: true, tooltipDelay: 120 },
    physics: {
      enabled: true,
      stabilization: { iterations: 200 },
      // è®©å±‚çº§å¸ƒå±€æ›´ç–
      hierarchicalRepulsion: {
        nodeDistance: 150,
        centralGravity: 0.0,
        springLength: 200,
        springConstant: 0.005,
        damping: 0.09,
        avoidOverlap: 1.0
      }
    },
    nodes: {
      font: { size: 11, multi: 'html' }  // â† å­—ä½“æ›´å°ï¼ˆåŸ 12ï¼‰
    },
    edges: {
      arrows: { to: {enabled: true, scaleFactor: 0.7} }, // ç®­å¤´ç•¥å°
      smooth: { enabled: true, type: 'dynamic' },
      font: { size: 9, align: 'horizontal' }               // â† è¾¹æ–‡å­—æ›´å°ï¼ˆåŸ 10ï¼‰
    },
    layout: {
      hierarchical: {
        enabled: true,
        direction: 'UD',
        sortMethod: 'directed',
        nodeSpacing: 150,        // â† èŠ‚ç‚¹æ¨ªå‘é—´è·ï¼ˆåŸ 180ï¼‰
        levelSeparation: 150     // â† å±‚çº§çºµå‘é—´è·ï¼ˆåŸ 180ï¼‰
      }
    }
  };
}


let network = new vis.Network(container, {nodes, edges}, buildOptions());
network.once('stabilized', () => network.fit());

// ç»Ÿè®¡ä¿¡æ¯
function updateInfo() {
  info.textContent = `èŠ‚ç‚¹: ${nodes.length}  è¾¹: ${edges.length}`;
}
updateInfo();

// ç‚¹å‡»èŠ‚ç‚¹ â†’ å³ä¾§è¯¦æƒ…
network.on('click', (params) => {
  if (params.nodes.length) {
    const nid = params.nodes[0];
    const n = allNodes.get(nid);
    details.innerHTML = n.title;
  }
});

// æœç´¢
const queryEl = document.getElementById('query');
document.getElementById('btnSearch').onclick = () => {
  const q = (queryEl.value || '').trim().toLowerCase();
  if (!q) return;
  // åŒ¹é… id æˆ–æè¿°
  const hits = allNodes.get().filter(n => n.id.toLowerCase().includes(q) || stripHtml(n.title).toLowerCase().includes(q));
  if (!hits.length) return;
  const hitIds = hits.map(h => h.id);
  // åªé«˜äº®åŒ¹é…
  nodes.update(nodes.get().map(n => ({ id: n.id, color: allNodes.get(n.id).color })));
  hitIds.forEach(id => nodes.update({ id, color: '#ffc107' }));
  network.selectNodes(hitIds);
  network.focus(hitIds[0], { scale: 1.1, animation: true });
};
document.getElementById('btnClear').onclick = () => {
  nodes.update(nodes.get().map(n => ({ id: n.id, color: allNodes.get(n.id).color })));
  network.unselectAll();
};
function stripHtml(s) {
  const div = document.createElement('div'); div.innerHTML = s; return div.textContent || '';
}

// ç±»å‹è¿‡æ»¤
for (const cb of document.querySelectorAll('.typeToggle')) {
  cb.addEventListener('change', () => {
    const enabled = new Set(Array.from(document.querySelectorAll('.typeToggle:checked')).map(x => x.value));
    // æ›´æ–° nodes å¯è§æ€§ï¼ˆç”¨ dataset è¿‡æ»¤ï¼‰
    const keepIds = allNodes.get().filter(n => enabled.has(n.group)).map(n => n.id);
    nodes.clear();
    nodes.add(allNodes.get(keepIds));
    // è¾¹ï¼šä¸¤ç«¯éƒ½åœ¨ keepIds æ‰ä¿ç•™
    edges.clear();
    edges.add(allEdges.get().filter(e => keepIds.includes(e.from) && keepIds.includes(e.to)));
    updateInfo();
  });
}

// å¸ƒå±€/ç‰©ç†åˆ‡æ¢
document.getElementById('hier').onchange = (e) => {
  const hier = e.target.checked;
  const opts = buildOptions();
  opts.layout.hierarchical.enabled = hier;
  network.setOptions(opts);
  network.stabilize();
};
document.getElementById('physics').onchange = (e) => {
  const phys = e.target.checked;
  const opts = buildOptions();
  opts.physics.enabled = phys;
  network.setOptions(opts);
  network.stabilize();
};

// fit
document.getElementById('btnFit').onclick = () => network.fit();

</script>
</body>
</html>
